name: box-rethinkdbdash
version: 0.1.0
inherits: wercker/ubuntu12.04-webessentials@0.0.3
type: main
platform: ubuntu@12.04
description: Box running node 0.11.10 for rethinkdbdash
keywords:
  - rethinkdb
  - rethinkdbdash 
  - noqsql
  - database
  - json
  - nodejs
packages:
  - rethinkdb@1.11
script: |
  sudo apt-get remove nodejs
  sudo add-apt-repository ppa:rwky/nodejs-unstable -y
  sudo add-apt-repository ppa:rethinkdb/ppa -y
  sudo apt-get update -y
  sudo apt-get install nodejs=0.11.10-rwky1~precise -y
  sudo apt-get install rethinkdb -y
  sudo mkdir -p /etc/rethinkdb/instances.d
  sudo -- sh -c "echo 'bind=all' > /etc/rethinkdb/instances.d/default.conf"
  echo `node --version`
  echo `nodejs --version`
  sudo ln -s /usr/bin/node /usr/bin/nodejs

env:
  WERCKER_RETHINKDB_PORT: 28015
  WERCKER_RETHINKDB_HOST: $$HOST$$
  WERCKER_RETHINKDB_URL: $$HOST$$:28015
  WERCKER_RETHINKDB_VERSION: "1.11"
